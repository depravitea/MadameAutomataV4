import { SlashCommandBuilder } from 'discord.js';
import { spendGems, addGems } from '../lib/economy.js';
export const data=new SlashCommandBuilder().setName('stash-flip').setDescription('Flip a coin for gems').addIntegerOption(o=>o.setName('wager').setDescription('Wager').setRequired(true)).addStringOption(o=>o.setName('call').setDescription('heads/tails').setRequired(true));
export async function execute(i:any){ const w=i.options.getInteger('wager',true); const call=(i.options.getString('call',true)||'').toLowerCase(); if(!['heads','tails'].includes(call)) return i.reply({ content:'Call heads or tails.',ephemeral:true}); const ok=await spendGems(i.guildId!, i.user.id, w); if(!ok) return i.reply({ content:'Not enough gems.',ephemeral:true}); const flip=Math.random()<0.5?'heads':'tails'; if(flip===call){ await addGems(i.guildId!, i.user.id, w*2, 'flip'); await i.reply({ content:`It lands **${flip}**. You win **${w}** ðŸ’Ž net.`}); } else { await i.reply({ content:`It lands **${flip}**. You lost your wager.`}); } }
